!function(r){if("function"==typeof define&&(define.cmd||define.amd))define(function(t){var e=t("jquery");return r(e)});else if(window.jQuery){var t=r(window.jQuery);window.Validator=t}else console&&console.error("U need to load jquery!")}(function(r){var t=r,e=function(r,e){this.errors=[],this.$el=t(r),this.opts=e||{},this.opts=t.extend({config:{},handle:t.noop},e),this.init(),this.validateAll()};return e.prototype.init=function(){var r=this;this.$el.on("blur","input,select,textarea",function(e){var i=t(e.currentTarget);r._doValid(i,!0)}),this.$el.on("keyup","input,textarea",function(e){var i=t(e.currentTarget);r._hasError(i.attr("name"))&&r._doValid(i,!1)&&r.opts.handle(null,i)}),this.$el.on("change","select",function(e){var i=t(e.currentTarget);r._hasError(i.attr("name"))&&r._doValid(i,!1)&&r.opts.handle(null,i)})},e.prototype.validateAll=function(r){var t=this.opts.config;this.errors=[],r=r||!1;for(var e in t)this._doValid(this.get(e).$el,r)},e.prototype.get=function(r){var t=this.$el.find("[name="+r+"]");return{$el:t,value:t.val()}},e.prototype.getValue=function(r){return r.val()},e.prototype._doValid=function(r,t){var e=r.attr("name"),i=this.getValue(r),o=this.opts.config[e],n=!0;if(t=t||!1,o.required){if(!i)return n=!1,this._setError(e,!1,"required",t,o),n;this._setError(e,!0,"required",t,o),n=!0}return o.valid&&(o.valid instanceof RegExp&&(n=o.valid.test(i),this._setError(e,n,"valid",t,o)),o.valid instanceof Function&&(n=o.valid(i),this._setError(e,n,"valid",t,o))),n},e.prototype.parseError=function(r,t,e,i){var o={$el:r,name:t};return"required"==e&&(o.tips=i.requiredTips||"该项为必填项"),"valid"==e&&(o.tips=i.validTips||"您的输入不正确"),o},e.prototype._setError=function(r,t,e,i,o){var n=this.get(r).$el,s=this._hasError(r);s?s=t?null:this.parseError(n,r,e,o):t||(s=this.parseError(n,r,e,o),this.errors.push(s)),i&&this.opts.handle(s,n)},e.prototype._hasError=function(r){for(var t=null,e=0,i=this.errors.length;i>e;e++)if(this.errors[e].name==r){t=this.errors[e];break}return t},e.prototype.valid=function(){var r=[];this.validateAll(!0);for(var t=0,e=this.errors.length;e>t;t++)this.errors[t]&&r.push(this.errors[t]);return r},e.prototype.isValid=function(){return 0==this.valid().length},e.prototype.setTips=function(r,t){var e=this.get(r).$el,i={$el:e,name:r,tips:t};this.errors.push(i),this.opts.handle(i,e)},e.prototype.destroy=function(){this.$el.off()},e});