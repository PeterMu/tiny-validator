!function(t){if("function"==typeof define&&(define.cmd||define.amd))define(function(r){var e=r("jquery");return t(e)});else if(window.jQuery){var r=t(window.jQuery);window.Validator=r}else console&&console.error("U need to load jquery!")}(function(t){var r=t,e=function(t,e){this.errors=[],this.$el=r(t),this.opts=e||{},this.opts=r.extend({config:{},handle:r.noop},e),this.init(),this.validateAll()};return e.prototype.init=function(){var t=this;this.$el.on("blur","input,select,textarea",function(e){var i=r(e.currentTarget);t._doValid(i,!0)}),this.$el.on("keyup","input,textarea",function(e){var i=r(e.currentTarget);t._hasError(i.attr("name"))&&t._doValid(i,!1)&&t.opts.handle(null,i)}),this.$el.on("change","select",function(e){var i=r(e.currentTarget);t._hasError(i.attr("name"))&&t._doValid(i,!1)&&t.opts.handle(null,i)})},e.prototype.validateAll=function(t){var r=this.opts.config;this.errors=[],t=t||!1;for(var e in r)this._doValid(this.get(e).$el,t)},e.prototype.get=function(t){var r=this.$el.find("[name="+t+"]");return{$el:r,value:r.val()}},e.prototype.getValue=function(t){return t.val()},e.prototype._doValid=function(t,r){var e=t.attr("name"),i=this.getValue(t),n=this.opts.config[e],o=!0;if(r=r||!1,n&&n.required){if(!i)return o=!1,this._setError(e,!1,"required",r,n),o;this._setError(e,!0,"required",r,n),o=!0}return n&&n.valid&&(n.valid instanceof RegExp&&(o=n.valid.test(i),this._setError(e,o,"valid",r,n)),n.valid instanceof Function&&(o=n.valid(i),this._setError(e,o,"valid",r,n))),o},e.prototype.parseError=function(t,r,e,i){var n={$el:t,name:r};return"required"==e&&(n.tips=i.requiredTips||"该项为必填项"),"valid"==e&&(n.tips=i.validTips||"您的输入不正确"),n},e.prototype._setError=function(t,r,e,i,n){var o=this.get(t).$el,s=this._hasError(t);s?s=r?null:this.parseError(o,t,e,n):r||(s=this.parseError(o,t,e,n),this.errors.push(s)),i&&this.opts.handle(s,o)},e.prototype._hasError=function(t){for(var r=null,e=0,i=this.errors.length;i>e;e++)if(this.errors[e].name==t){r=this.errors[e];break}return r},e.prototype.valid=function(){var t=[];this.validateAll(!0);for(var r=0,e=this.errors.length;e>r;r++)this.errors[r]&&t.push(this.errors[r]);return t},e.prototype.isValid=function(){return 0==this.valid().length},e.prototype.setTips=function(t,r){var e=this.get(t).$el,i={$el:e,name:t,tips:r};this.errors.push(i),this.opts.handle(i,e)},e.prototype.destroy=function(){this.$el.off()},e.prototype.getData=function(){for(var t={},e=null,i=this.$el.find("input,textarea,select"),n=0,o=i.length;o>n;n++)e=r(i[n]),t[e.attr("name")]=this.getValue(e);return t},e});